import { Repository } from 'typeorm';
import { Conversation } from './entities/conversation.entity';
import { Message } from './entities/message.entity';
import { MessageReadStatus } from './entities/message-read-status.entity';
import { CreateMessageDto } from './dto/create-message.dto';
import { UpdateMessageDto } from './dto/update-message.dto';
import { ToxicFilterService } from '../toxic-filter/toxic-filter.service';
export declare class ChatService {
    private conversationRepository;
    private messageRepository;
    private messageReadStatusRepository;
    private toxicFilterService;
    constructor(conversationRepository: Repository<Conversation>, messageRepository: Repository<Message>, messageReadStatusRepository: Repository<MessageReadStatus>, toxicFilterService: ToxicFilterService);
    getOrCreateConversation(senderId: number, receiverId: number, subject?: string): Promise<Conversation>;
    updateConversationStatus(conversationId: number, status: 'active' | 'in_counseling' | 'completed'): Promise<Conversation>;
    getUserConversations(userId: number, skip?: number, take?: number): Promise<{
        lastMessage: Message | null;
        unreadCount: number;
        id: number;
        senderId: number;
        receiverId: number;
        subject: string;
        lastMessageId: number;
        lastMessageAt: Date;
        isActive: boolean;
        status: "active" | "in_counseling" | "completed";
        createdAt: Date;
        updatedAt: Date;
        senderIdMin: number;
        senderIdMax: number;
        sender: import("../users/entities/user.entity").User;
        receiver: import("../users/entities/user.entity").User;
        messages: Message[];
    }[]>;
    getConversation(conversationId: number, userId: number, limit?: number): Promise<{
        conversation: Conversation;
        messages: Message[];
    }>;
    sendMessage(senderId: number, dto: CreateMessageDto): Promise<Message>;
    sendVoiceMessage(senderId: number, conversationId: number, voiceUrl: string, fileName: string, fileSize: number, duration: number): Promise<Message>;
    updateMessage(messageId: number, senderId: number, dto: UpdateMessageDto): Promise<Message>;
    deleteMessage(messageId: number, senderId: number): Promise<void>;
    markAsRead(messageId: number, userId: number): Promise<MessageReadStatus>;
    markConversationAsRead(conversationId: number, userId: number): Promise<void>;
    getUnreadCount(userId: number): Promise<number>;
    getUnreadByConversation(userId: number): Promise<any[]>;
    searchMessages(conversationId: number, userId: number, query: string, limit?: number): Promise<Message[]>;
    deleteConversation(conversationId: number, userId: number): Promise<void>;
    getMessageCount(): Promise<number>;
}
